import{f as p,j as e,g as w,L as P,w as J,h as k,R as u,O as T}from"./chunk-UIGDSWPH-BXv6hRbg.js";function L({onToggleSidebar:s,isSidebarOpen:a,onJournalPage:n}){const{pathname:i}=p(),b={"/journals":"Journals","/stickers":"Stickers","/explore":"Explore journals","/favourites":"Favourites","/profile":"Profile"}[i]||"Serenote";return e.jsxs("header",{className:"app-header",children:[e.jsx("div",{className:"header-left",children:e.jsxs("div",{className:"header-title-container",children:[!a&&!n&&e.jsx("button",{className:"sidebar-reopen-btn",onClick:s,"aria-label":"Open sidebar",children:"â˜°"}),e.jsx("h1",{className:"header-title",children:b})]})}),e.jsxs("div",{className:"header-icons",children:[e.jsx("button",{className:"icon-btn",children:"ðŸ””"}),e.jsx("button",{className:"icon-btn",children:"ðŸª"}),e.jsx("button",{className:"icon-btn",children:"ðŸ‘¤"})]})]})}function C({onToggle:s}){return e.jsx("div",{className:"sidebar-header",children:e.jsx("button",{className:"close-sidebar-btn",onClick:s,children:"Close Sidebar Button"})})}function O(){const s=[{to:"/journals",label:"Journals"},{to:"/stickers",label:"Stickers"},{to:"/explore",label:"Explore journals"},{to:"/favourites",label:"Favourites"},{to:"/profile",label:"Profile"}];return e.jsx("nav",{className:"sidebar-list",children:s.map(a=>e.jsx(w,{to:a.to,className:({isActive:n})=>"sidebar-item"+(n?" active":""),children:a.label},a.to))})}function I(s){return e.jsxs("aside",{className:"sidebar",children:[e.jsx(C,{onToggle:s.onToggle}),e.jsx(O,{})]})}function E(){return e.jsxs("aside",{className:"journal-sidebar",children:[e.jsx("div",{className:"journal-sidebar-top",children:e.jsx(P,{to:"/",className:"journal-back-btn","aria-label":"Back to journals",children:"<"})}),e.jsxs("nav",{className:"journal-tools","aria-label":"Journal tools",children:[e.jsx("button",{className:"tool-btn",type:"button",title:"Pen",children:"âœŽ"}),e.jsx("button",{className:"tool-btn",type:"button",title:"Stamp",children:"â—¯"}),e.jsx("button",{className:"tool-btn",type:"button",title:"Undo",children:"â¤º"}),e.jsx("button",{className:"tool-btn",type:"button",title:"Redo",children:"â¤»"}),e.jsx("button",{className:"tool-btn",type:"button",title:"Lasso",children:"â—"}),e.jsx("button",{className:"tool-btn",type:"button",title:"Image",children:"ðŸ–¼"}),e.jsx("button",{className:"tool-btn",type:"button",title:"Draw",children:"âœï¸Ž"}),e.jsx("button",{className:"tool-btn",type:"button",title:"Text",children:"T"}),e.jsx("button",{className:"tool-btn",type:"button",title:"Shuffle",children:"â‡„"}),e.jsxs("div",{className:"tool-swatches",children:[e.jsx("button",{className:"color-swatch","aria-label":"Color 1"}),e.jsx("button",{className:"color-swatch","aria-label":"Color 2"}),e.jsx("button",{className:"color-swatch","aria-label":"Color 3"})]}),e.jsx("div",{className:"tool-more",children:e.jsx("button",{className:"more-dots","aria-label":"More"})})]})]})}const j="serenote_journals";async function F(){await new Promise(a=>setTimeout(a,100));const s=[{id:1,journalName:"Family",pages:[{id:1,content:"First family note",createdAt:Date.now()}]},{id:2,journalName:"Trips",pages:[{id:1,content:"Packing list",createdAt:Date.now()}]},{id:3,journalName:"Friends",pages:[]}];try{const a=localStorage.getItem(j);return{journals:a?JSON.parse(a):s}}catch{return{journals:s}}}const R=J(function(){const{journals:a}=k(),[n,i]=u.useState(a);u.useEffect(()=>{try{localStorage.setItem(j,JSON.stringify(n))}catch{}},[n]);const h=o=>{const l=n.length?n[n.length-1].id+1:1,r={id:l,journalName:o||`New Journal ${l}`,pages:[]};return i(t=>[...t,r]),r},b=(o,l="")=>{i(r=>r.map(t=>{if(String(t.id)!==String(o))return t;const d={id:t.pages.length?t.pages[t.pages.length-1].id+1:1,content:l,createdAt:Date.now()};return{...t,pages:[...t.pages,d]}}))},N=(o,l,r)=>{i(t=>t.map(c=>String(c.id)!==String(o)?c:{...c,pages:c.pages.map(d=>String(d.id)===String(l)?{...d,content:r}:d)}))},S=(o,l)=>{i(r=>r.map(t=>String(t.id)!==String(o)?t:{...t,pages:t.pages.filter(c=>String(c.id)!==String(l))}))},f=u.useMemo(()=>({journals:n,addJournal:h,addPage:b,updatePage:N,deletePage:S,setJournals:i}),[n]),[x,y]=u.useState(!0),v=p(),m=/^\/journals\/\d+/.test(v.pathname),g=()=>y(o=>!o);return e.jsxs("div",{className:"app-layout",children:[m?e.jsx(E,{}):!m&&x&&e.jsx(I,{onToggle:g}),e.jsxs("main",{className:"main-content",children:[e.jsx(L,{onToggleSidebar:g,isSidebarOpen:x,onJournalPage:m}),e.jsx(T,{context:f})]})]})});export{F as clientLoader,R as default};
